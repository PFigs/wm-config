# Copyright 2019 Wirepas Ltd
#
# Default settings
#
# Please do not edit this file. It is meant to provide last resort
# default values.
#
# To use a private key for login, please use ssh-keygen to generate
# a key par and copy the public key to WM_HOST_USER_PPKI as:
#
# WM_HOST_USER_PPKI="ssh-rsa AAAAB3N(...) example@wirepas-evk"
#

# These keys operate on the wm-config
WM_CFG_FRAMEWORK_UPDATE=${WM_CFG_FRAMEWORK_UPDATE:-"false"}
WM_CFG_FRAMEWORK_DEBUG=${WM_CFG_FRAMEWORK_DEBUG:-"false"}

WM_CFG_STARTUP_DELAY=${WM_CFG_STARTUP_DELAY:-"0"}
WM_CFG_REBOOT_DELAY=${WM_CFG_REBOOT_DELAY:-"2"}

WM_CFG_PYTHON_VIRTUAL_ENV=${WM_CFG_PYTHON_VIRTUAL_ENV:-"${HOME}/.local/wirepas/virtualenv/wm-config"}
WM_CFG_PYTHON_VERSION=${WM_CFG_PYTHON_VERSION:-"python3"}

# WM_CONFIG framework updates
WM_CFG_UPDATER_IMAGE=${WM_CFG_UPDATER_IMAGE:-"wirepas/wm-config"}
WM_CFG_UPDATER_VERSION=${WM_CFG_UPDATER_VERSION:-"latest"}

# Gateway settings
WM_GW_STATE=${WM_GW_STATE:-"start"}

WM_GW_VERSION=${WM_GW_VERSION:-"latest"}
WM_GW_IMAGE=${WM_GW_IMAGE:-"wirepas/gateway"}

WM_GW_CLEANUP=${WM_GW_CLEANUP:-"false"}

WM_GW_DBUS_CONF=${WM_GW_DBUS_CONF:-"com.wirepas.sink.conf"}
WM_GW_DBUS_CONF_USER=${WM_GW_DBUS_CONF_USER:-"root"}

# Gateway sink service
WM_GW_SINK_ID=${WM_GW_SINK_ID:-0}
WM_GW_SINK_UART_PORT=${WM_GW_SINK_UART_PORT:-"/dev/ttyWM"}
WM_GW_SINK_PORT_RULE=${WM_GW_SINK_PORT_RULE:-"/dev/ttyACM* /dev/ttyUSB*"}
WM_GW_SINK_BLACKLIST=${WM_GW_SINK_BLACKLIST:-}
WM_GW_SINK_BITRATE_CONFIGURATION=${WM_GW_SINK_BITRATE_CONFIGURATION:-}
WM_GW_SINK_ENUMERATION=${WM_GW_SINK_ENUMERATION:-"false"}
WM_GW_SINK_SERVICE_CMD=${WM_GW_SINK_SERVICE_CMD:-"sink"}
WM_GW_SINK_SERVICE_NETWORK=${WM_GW_SINK_SERVICE_NETWORK:-}
WM_GW_SINK_SERVICE_RESTART_POLICY=${WM_GW_SINK_SERVICE_RESTART_POLICY:-"restart: always"}
WM_GW_SINK_SERVICE_USER=${WM_GW_SINK_SERVICE_USER:-"user: root"}

# Gateway transport service
WM_GW_ID=${WM_GW_ID:-"$(hostname)"}
WM_GW_MODEL=${WM_GW_MODEL:-"wirepas-evk"}
WM_GW_IGNORED_ENDPOINTS_FILTER=${WM_GW_IGNORED_ENDPOINTS_FILTER:-}
WM_GW_WHITENED_ENDPOINTS_FILTER=${WM_GW_WHITENED_ENDPOINTS_FILTER:-}
WM_GW_TRANSPORT_SERVICE_CMD=${WM_GW_TRANSPORT_SERVICE_CMD:-"transport"}
WM_GW_TRANSPORT_SERVICE_NETWORK=${WM_GW_TRANSPORT_SERVICE_NETWORK:-"network_mode: host"}
WM_GW_TRANSPORT_SERVICE_RESTART_POLICY=${WM_GW_TRANSPORT_SERVICE_RESTART_POLICY:-"restart: always"}
WM_GW_TRANSPORT_SERVICE_USER=${WM_GW_TRANSPORT_SERVICE_USER:-"user: root"}

WM_GW_SERVICES_ENV_FILE=${WM_GW_SERVICES_ENV_FILE:-"${WM_CFG_GATEWAY_PATH}/services.env"}
WM_GW_SERVICES_USER_PATH=${WM_GW_SERVICES_USER_PATH:-"${WM_CFG_GATEWAY_PATH}/user"}
WM_GW_DEBUG_LEVEL=${WM_GW_DEBUG_LEVEL:-}

# Docker daemon settings
WM_DOCKER_USERNAME=${WM_DOCKER_USERNAME:-""}
WM_DOCKER_PASSWORD=${WM_DOCKER_PASSWORD:-""}
WM_DOCKER_CLEANUP=${WM_DOCKER_CLEANUP:-"true"}
WM_DOCKER_FORCE_RECREATE=${WM_DOCKER_FORCE_RECREATE:-"false"}
WM_DOCKER_STATUS_DELAY=${WM_DOCKER_STATUS_DELAY:-"2"}
WM_DOCKER_DAEMON_JSON=${WM_DOCKER_DAEMON_JSON:-''}

# MQTT
WM_SERVICES_MQTT_HOSTNAME=${WM_SERVICES_MQTT_HOSTNAME:-"host.extwirepas.com"}
WM_SERVICES_MQTT_PORT=${WM_SERVICES_MQTT_PORT:-"8883"}
WM_SERVICES_MQTT_USERNAME=${WM_SERVICES_MQTT_USERNAME:-"mqttuser"}
WM_SERVICES_MQTT_PASSWORD=${WM_SERVICES_MQTT_PASSWORD:-"uiaidujfk1897fyeu023849sdh?("};
WM_SERVICES_MQTT_ALLOW_UNSECURE=${WM_SERVICES_MQTT_ALLOW_UNSECURE:-}
WM_SERVICES_MQTT_CERTIFICATE_CHAIN=${WM_SERVICES_MQTT_CERTIFICATE_CHAIN:-}

# FLUENTD
WM_SERVICES_FLUENTD_HOSTNAME=${WM_SERVICES_FLUENTD_HOSTNAME:-}
WM_SERVICES_FLUENTD_PORT=${WM_SERVICES_FLUENTD_PORT:-"24224"}
WM_SERVICES_FLUENTD_TAG=${WM_SERVICES_FLUENTD_TAG:-"wm-config"}
WM_SERVICES_FLUENTD_RECORD=${WM_SERVICES_FLUENTD_RECORD:-"gateway.services"}
WM_SERVICES_FLUENTD_ASYNC_CONNECT=${WM_SERVICES_FLUENTD_ASYNC_CONNECT:-\"true\"} # must be string
WM_SERVICES_FLUENTD_SUB_SECOND_PRECISION=${WM_SERVICES_FLUENTD_SUB_SECOND_PRECISION:-\"true\"} # must be string
WM_SERVICES_FLUENTD_BUFFER_LIMIT=${WM_SERVICES_FLUENTD_BUFFER_LIMIT:-"\"50M\""}
WM_SERVICES_FLUENTD_RETRY_WAIT=${WM_SERVICES_FLUENTD_RETRY_WAIT:-"\"1s\""}
WM_SERVICES_FLUENTD_MAX_RETRIES=${WM_SERVICES_FLUENTD_MAX_RETRIES:-"\"3\""}
WM_SERVICES_FLUENTD_DOCKER_CLI=${WM_SERVICES_FLUENTD_DOCKER_CLI:-"true"}

# WiFi management - set the AP SSID and PASSWORD you want your gw to connect to
WM_WIFI_ENABLE=${WM_WIFI_ENABLE:-"false"}
WM_WIFI_AP_SSID=${WM_WIFI_AP_SSID:-''}
WM_WIFI_AP_PASSWORD=${WM_WIFI_AP_PASSWORD:-''}
WM_WIFI_INTERFACE=${WM_WIFI_INTERFACE:-"wlan0"}

# Wirepas support - keys to allow FAEs to connect to your box
WM_SUPPORT_HOSTNAME=${WM_SUPPORT_HOSTNAME:-"${WM_SERVICES_MQTT_HOSTNAME}"}
WM_SUPPORT_USERNAME=${WM_SUPPORT_USERNAME:-"${USER}"}
WM_SUPPORT_KEY=${WM_SUPPORT_KEY:-"${WM_CFG_SETTINGS_PATH}/support.pem"}
WM_SUPPORT_KEY_PATH=${WM_SUPPORT_KEY_PATH:-"${HOME}/.ssh/support.pem"}
WM_SUPPORT_PORT=${WM_SUPPORT_PORT:-''}

# Host settings
WM_HOST_TTY_SYMLINK=${WM_HOST_TTY_SYMLINK:-"ttyWM"}
WM_HOST_TTY_SIMLINK_FILENAME=${WM_HOST_TTY_SIMLINK_FILENAME:-"99-wirepas-serial.rules"}

WM_HOST_INSTALL_DEPENDENCIES=${WM_HOST_INSTALL_DEPENDENCIES:-"true"}
WM_HOST_UPGRADE_PACKAGES=${WM_HOST_UPGRADE_PACKAGES:-"false"}

WM_HOST_HOSTNAME=${WM_HOST_HOSTNAME:-"wm-evk"}
WM_HOST_SSH_ENABLE_PASSWORD_LOGIN=${WM_HOST_SSH_ENABLE_PASSWORD_LOGIN:-"true"}
WM_HOST_USER_NAME=${WM_HOST_USER_NAME:-"${USER}"}
WM_HOST_USER_PASSWORD=${WM_HOST_USER_PASSWORD:-}
WM_HOST_USER_PPKI=${WM_HOST_USER_PPKI:-}

WM_HOST_KEYBOARD_CONFIGURE=${WM_HOST_KEYBOARD_CONFIGURE:-"false"}
WM_HOST_KEYBOARD_XKBMODEL=${WM_HOST_KEYBOARD_XKBMODEL:-"pc105"}
WM_HOST_KEYBOARD_XKBLAYOUT=${WM_HOST_KEYBOARD_XKBLAYOUT:-"gb"}
WM_HOST_KEYBOARD_XKBVARIANT=${WM_HOST_KEYBOARD_XKBVARIANT:-''}
WM_HOST_KEYBOARD_XKBOPTIONS=${WM_HOST_KEYBOARD_XKBOPTIONS:-''}
WM_HOST_KEYBOARD_BACKSPACE=${WM_HOST_KEYBOARD_BACKSPACE:-"guess"}

# Systemd periodic job
WM_SYSTEMD_UPDATER=${WM_SYSTEMD_UPDATER:-"wirepas-updater"}
WM_SYSTEMD_UPDATER_DISABLE=${WM_SYSTEMD_UPDATER_DISABLE:-"false"}
WM_SYSTEMD_UPDATER_ENABLE=${WM_SYSTEMD_UPDATER_ENABLE:-"true"}
WM_SYSTEMD_UPDATER_INTERVAL=${WM_SYSTEMD_UPDATER_INTERVAL:-2592000}

# Define a webhook where to get updates about your gateway status
WM_CFG_WEBHOOK_POST_URL=${WM_CFG_WEBHOOK_POST_URL:-}
